# Multi-Language Support for MII IG Basis

This directory contains translations for the MII Implementation Guide.

## Current Status

**Multi-Language IG**
- Language switcher working ("English | Deutsch")
- ImplementationGuide menu items translated (`ImplementationGuide-mii-ig-base.po`)
- Language-specific MII logos (English/German versions switch automatically)
- Template: `fhir2.base.template#current` with built-in multi-language support

## Directory Structure

```
input/
└── translations/
    └── de/                          # German translations
        ├── pagecontent/             # Translated markdown pages
        │   ├── index.md            
        │   ├── guidance.md         
        │   └── conformance.md      
        ├── ImplementationGuide-mii-ig-base.po  Menu items
        └── *.po                     # Resource translations (PO format)
```

Translation templates (generated by IG Publisher):
```
translations/de/po/              # generated PO files for all resources
```

## How to Add German Translations

### 1. Build the IG First

The IG publisher automatically generates translation template files:

```bash
./_genonce.sh
```

After the build, translation templates are generated in:
- `translations/de/po/` - PO format (recommended)
- `translations/de/json/` - JSON format
- `translations/de/xliff/` - XLIFF format

### 2. For Resources (Profiles, Extensions, ValueSets, etc.)

**Recommended: Use PO format**

1. After building, find generated files in `translations/de/po/`
2. Edit the `.po` files using:
   - Text editor
   - PO editor software (Poedit, Lokalize, etc.)
   - AI with review
3. Copy edited files to `input/translations/de/[ResourceType]-[id].po`
4. Rebuild the IG

Example PO file (`StructureDefinition-mii-pr-person-patient.po`):

```po
#: StructureDefinition.title
msgid "MII PR Person Patient"
msgstr "MII PR Person Patient"

#: StructureDefinition.description  
msgid "This profile describes a patient..."
msgstr "Dieses Profil beschreibt einen Patienten..."

#: Patient.identifier
msgid "Identifier"
msgstr "Identifikator"

#: Patient.identifier.short
msgid "An identifier for this patient"
msgstr "Ein Identifikator für diesen Patienten"
```

### 3. For Narrative Content (Pages)

Create German versions of page content files in `input/translations/de/pagecontent/`:
- `input/translations/de/pagecontent/index.md`
- `input/translations/de/pagecontent/guidance.md`
- etc.

The IG publisher automatically matches these with the English versions based on filename.

## Quick Start: Translating Resources

### 1. Build to Generate Templates

```bash
./_genonce.sh
```

After building, translation templates are generated in `translations/de/po/` (PO files for all resources).

### 2. Translate a Resource

```bash
# 1. Find generated PO file:
#    translations/de/po/StructureDefinition-mii-pr-person-patient.po

# 2. Edit the PO file (use text editor or Poedit)
#    Change msgstr lines to add German translations

# 3. Copy to input directory:
cp translations/de/po/StructureDefinition-mii-pr-person-patient.po \
   input/translations/de/

# 4. Rebuild to see changes:
./_genonce.sh
```

**PO File Example:**
```po
#: StructureDefinition.title
msgid "MII PR Person Patient"
msgstr "MII PR Person Patient"

#: StructureDefinition.description
msgid "This profile describes a patient..."
msgstr "Dieses Profil beschreibt einen Patienten..."

#: Patient.identifier
msgid "Identifier"
msgstr "Identifikator"
```

### 3. Translate a Page

Create file: `input/translations/de/pagecontent/[filename].md`

Example: `input/translations/de/pagecontent/guidance.md`

The IG publisher automatically matches filenames with English originals.

## Translation Priority

### Start Here 
1. **Homepage** (`input/translations/de/pagecontent/index.md`) ✅ Done
2. **ImplementationGuide** (`input/translations/de/ImplementationGuide-mii-ig-base.po`) ✅ Done
3. **Key profiles** - Edit PO files from `translations/de/po/`:
   - Patient (`StructureDefinition-mii-pr-person-patient.po`)
   - Encounter (`StructureDefinition-mii-pr-fall-kontakt-gesundheitseinrichtung.po`)
   - Condition (`StructureDefinition-mii-pr-diagnose-condition.po`)
   - Procedure (`StructureDefinition-mii-pr-prozedur-procedure.po`)
4. **ValueSet and CodeSystem display names**
5. **Extension descriptions**
6. **Additional guidance pages**
7. **Detailed element definitions** in profiles
8. **Technical documentation pages**
9. **Example descriptions**

## Common Translation Patterns

### Common Terms
- Implementation Guide → Implementierungsleitfaden
- Profile → Profil
- Extension → Extension (FHIR specific term)
- Element → Element
- Constraint → Einschränkung / Constraint
- Must Support → Must Support (FHIR specific term)
- Cardinality → Kardinalität
- Binding → Binding
- ValueSet → ValueSet / Wertemenge
- CodeSystem → CodeSystem / Codesystem

### Conformance Verbs
- SHALL/MUST → MUSS / MÜSSEN
- SHOULD → SOLLTE / SOLLTEN
- MAY → KANN / OPTIONAL
- SHALL NOT → DARF NICHT

## Configuration Details

### Template & Multi-Language Support
- **Template**: `fhir2.base.template#current` (configured in `ig.ini`)
- **Multi-language**: Built-in language switcher and locale-aware navigation
- **Logo customization**: Via `input/includes/fragment-header.html`
  - MII logo switches between English/German versions
  - FHIR logo in header
  - Uses Jekyll conditionals: `{% if include.lang == 'de' %}` for language detection

### sushi-config.yaml Parameters
```yaml
parameters:
  i18n-default-lang: en
  i18n-lang:
    - de
  translation-sources:
    - input/translations/de
```

## Tools & Resources

- **PO Editors**: [Poedit](https://poedit.net/) (free, cross-platform), Lokalize, GTranslator
- **PO Format**: https://www.gnu.org/software/gettext/manual/html_node/PO-Files.html
- **FHIR Multi-Language Guide**: https://build.fhir.org/ig/FHIR/ig-guidance/branches/master/languages.html

## Tips

1. **Build first**: Always run `./_genonce.sh` to generate translation templates
2. **Use PO format**: Recommended format with best tooling support
3. **Edit, don't create**: IG publisher generates structure - you just add translations
4. **Test incrementally**: Translate a few items, build, check, repeat
5. **Be consistent**: Use the same terms throughout
6. **Preserve across rebuilds**: Translations in `input/translations/de/` are preserved

